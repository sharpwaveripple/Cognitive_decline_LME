summary(fit.mem)
variables.mem <- c("wmhratio06", "hvratio06", "mem06",
"wmhratio11", "hvratio11", "mem11",
"wmhratio15", "hvratio15", "mem15")
df.var.mem <- df[variables.mem]
df.var.mem.incl <- df.var.mem[complete.cases(df.var.mem), ]
modelfile.mem <- paste("temp/long_wmh_hv_mem.lav", sep="/")
model.mem <- readLines(modelfile.mem)
fit.mem <- growth(model.mem, data=df.var.mem.incl)
fitMeasures(fit.mem)
summary(fit.mem)
semPaths(fit.mem)
variables.mem <- c("wmhratio06", "hvratio06", "mem06",
"wmhratio11", "hvratio11", "mem11",
"wmhratio15", "hvratio15", "mem15")
df.var.mem <- df[variables.mem]
df.var.mem.incl <- df.var.mem[complete.cases(df.var.mem), ]
modelfile.mem <- paste("temp/long_wmh_hv_mem.lav", sep="/")
model.mem <- readLines(modelfile.mem)
fit.mem <- growth(model.mem, data=df.var.mem.incl)
fitMeasures(fit.mem)
variables.mem <- c("wmhratio06", "hvratio06", "mem06",
"wmhratio11", "hvratio11", "mem11",
"wmhratio15", "hvratio15", "mem15")
df.var.mem <- df[variables.mem]
df.var.mem.incl <- df.var.mem[complete.cases(df.var.mem), ]
modelfile.mem <- paste("temp/long_wmh_hv_mem.lav", sep="/")
model.mem <- readLines(modelfile.mem)
fit.mem <- growth(model.mem, data=df.var.mem.incl)
fitMeasures(fit.mem)
summary(fit.mem)
modelfile.mem <- paste("temp/long_wmh_hv_mem.lav", sep="/")
model.mem <- readLines(modelfile.mem)
fit.mem <- growth(model.mem, data=df.var.mem.incl)
modelfile.mem <- paste("temp/long_wmh_hv_mem.lav", sep="/")
model.mem <- readLines(modelfile.mem)
fit.mem <- growth(model.mem, data=df.var.mem.incl)
variables.mem15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "mem15")
variables.mem15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "mem15")
df.var.mem15 <- df[variables.mem15]
df.var.mem15.incl <- df.var.mem15[complete.cases(df.var.mem15), ]
modelfile.mem15 <- paste("temp/long_wmh_hv_mem15.lav", sep="/")
model.mem15 <- readLines(modelfile.mem15)
fit.mem15 <- growth(model.mem15, data=df.var.mem15.incl)
fitMeasures(fit.mem15)
summary(fit.mem15)
semPaths(fit.mem15)
modelfile.mem15 <- paste("temp/long_wmh_hv_mem15.lav", sep="/")
model.mem15 <- readLines(modelfile.mem15)
fit.mem15 <- growth(model.mem15, data=df.var.mem15.incl)
modelfile.mem15 <- paste("temp/long_wmh_hv_mem15.lav", sep="/")
model.mem15 <- readLines(modelfile.mem15)
fit.mem15 <- growth(model.mem15, data=df.var.mem15.incl)
fitMeasures(fit.mem15)
summary(fit.mem15)
variables.psexf15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "psexf15")
df.var.psexf15 <- df[variables.psexf15]
df.var.psexf15.incl <- df.var.psexf15[complete.cases(df.var.psexf15), ]
modelfile.psexf15 <- paste("temp/long_wmh_hv_psexf15.lav", sep="/")
model.psexf15 <- readLines(modelfile.psexf15)
fit.psexf15 <- growth(model.psexf15, data=df.var.psexf15.incl)
fitMeasures(fit.psexf15)
summary(fit.psexf15)
semPaths(fit.psexf15)
variables.mem15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "mem15")
df.var.mem15 <- df[variables.mem15]
df.var.mem15.incl <- df.var.mem15[complete.cases(df.var.mem15), ]
modelfile.mem15 <- paste("temp/long_wmh_hv_mem15.lav", sep="/")
model.mem15 <- readLines(modelfile.mem15)
fit.mem15 <- growth(model.mem15, data=df.var.mem15.incl)
fitMeasures(fit.mem15)
summary(fit.mem15)
semPaths(fit.mem15)
variables.ps15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "ps15")
df.var.ps15 <- df[variables.ps15]
df.var.ps15.incl <- df.var.ps15[complete.cases(df.var.ps15), ]
modelfile.ps15 <- paste("temp/long_wmh_hv_ps15.lav", sep="/")
model.ps15 <- readLines(modelfile.ps15)
fit.ps15 <- growth(model.ps15, data=df.var.ps15.incl)
fitMeasures(fit.ps15)
summary(fit.ps15)
semPaths(fit.ps15)
variables.exf15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "exf15")
df.var.exf15 <- df[variables.exf15]
df.var.exf15.incl <- df.var.exf15[complete.cases(df.var.exf15), ]
modelfile.exf15 <- paste("temp/long_wmh_hv_exf15.lav", sep="/")
model.exf15 <- readLines(modelfile.exf15)
fit.exf15 <- growth(model.exf15, data=df.var.exf15.incl)
fitMeasures(fit.exf15)
summary(fit.exf15)
semPaths(fit.exf15)
variables.psexf <- c("wmhratio06", "hvratio06", "psexf06",
"wmhratio11", "hvratio11", "psexf11",
"wmhratio15", "hvratio15", "psexf15")
df.var.psexf <- df[variables.psexf]
df.var.psexf.incl <- df.var.psexf[complete.cases(df.var.psexf), ]
modelfile.psexf <- paste("temp/long_wmh_hv_psexf.lav", sep="/")
model.psexf <- readLines(modelfile.psexf)
fit.psexf <- growth(model.psexf, data=df.var.psexf.incl)
variables.mem <- c("wmhratio06", "hvratio06", "mem06",
"wmhratio11", "hvratio11", "mem11",
"wmhratio15", "hvratio15", "mem15")
df.var.mem <- df[variables.mem]
df.var.mem.incl <- df.var.mem[complete.cases(df.var.mem), ]
modelfile.mem <- paste("temp/long_wmh_hv_mem.lav", sep="/")
model.mem <- readLines(modelfile.mem)
fit.mem <- growth(model.mem, data=df.var.mem.incl)
fitMeasures(fit.mem)
summary(fit.mem)
semPaths(fit.mem)
variables.mem15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "mem15")
df.var.mem15 <- df[variables.mem15]
df.var.mem15.incl <- df.var.mem15[complete.cases(df.var.mem15), ]
modelfile.mem15 <- paste("temp/long_wmh_hv_mem15.lav", sep="/")
model.mem15 <- readLines(modelfile.mem15)
fit.mem15 <- growth(model.mem15, data=df.var.mem15.incl)
summary(fit.mem15)
semPaths(fit.mem15)
datafile <- "data/RUNDMC_datasheet_long.csv"
df <- read.csv(datafile, header=T)
df$hvratio06 <- (df$hv06 / df$tbv06)*1000
df$hvratio11 <- (df$hv11 / df$tbv11)*1000
df$hvratio15 <- (df$hv15 / df$tbv15)*1000
df$wmhratio06 <- log((df$wmh06 / df$tbv06)*100000)
df$wmhratio11 <- log((df$wmh11 / df$tbv11)*100000)
df$wmhratio15 <- log((df$wmh15 / df$tbv15)*100000)
variables.dem15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "dementiai15")
df.var.dem15 <- df[variables.dem15]
df.var.dem15.incl <- df.var.dem15[complete.cases(df.var.dem15), ]
modelfile.dem15 <- paste("temp/long_wmh_hv_dem15.lav", sep="/")
model.dem15 <- readLines(modelfile.dem15)
modelfile.dem15 <- paste("temp/long_wmh_hv_dem15.lav", sep="/")
model.dem15 <- readLines(modelfile.dem15)
fit.dem15 <- growth(model.dem15, data=df.var.dem15.incl)
modelfile.dem15 <- paste("temp/long_wmh_hv_dem15.lav", sep="/")
model.dem15 <- readLines(modelfile.dem15)
fit.dem15 <- growth(model.dem15, data=df.var.dem15.incl)
modelfile.dem15 <- paste("temp/long_wmh_hv_dem15.lav", sep="/")
model.dem15 <- readLines(modelfile.dem15)
fit.dem15 <- growth(model.dem15, data=df.var.dem15.incl)
fitMeasures(fit.dem15)
summary(fit.dem15)
fit.dem15 <- growth(model.dem15, data=df.var.dem15.incl, estimator="WLS")
fit.dem15 <- growth(model.dem15, data=df.var.dem15.incl, estimator="ML")
variables.dem15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "dementiai15", "dementiacat")
df.var.dem15 <- df[variables.dem15]
df.var.dem15.incl <- df.var.dem15[complete.cases(df.var.dem15), ]
View(df.var.dem15.incl)
semPaths(fit.dem15)
datafile <- "data/RUNDMC_datasheet_long.csv"
df <- read.csv(datafile, header=T)
df$hvratio06 <- (df$hv06 / df$tbv06)*1000
df$hvratio11 <- (df$hv11 / df$tbv11)*1000
df$hvratio15 <- (df$hv15 / df$tbv15)*1000
df$wmhratio06 <- log((df$wmh06 / df$tbv06)*100000)
df$wmhratio11 <- log((df$wmh11 / df$tbv11)*100000)
df$wmhratio15 <- log((df$wmh15 / df$tbv15)*100000)
df$mem06 <- df$wvlt123correctmean06 + df$wvltdelayrecall06 +
df$reyimmrecalltotalscore06 +	df$reydelayrecalltotalscore06 +
df$pp2sat06 + df$pp3sat06
df$mem11 <- df$wvlt123correctmean11 + df$wvltdelayrecall11 +
df$reyimmrecalltotalscore11 +	df$reydelayrecalltotalscore11 +
df$pp2sat11 + df$pp3sat11
df$mem15 <- df$wvlt123correctmean15 + df$wvltdelayrecall15 +
df$reyimmrecalltotalscore15 +	df$reydelayrecalltotalscore15 +
df$pp2sat15 + df$pp3sat15
df$psexf06 <- df$pp1sat06 + df$stroop1sat06 + df$stroop2sat06 + df$ldstcorrect06 +
df$fluencyanimals06 + df$fluencyjobs06 + df$stroopinterference06 +	df$vsattotalsat06
df$psexf11 <- df$pp1sat11 + df$stroop1sat11 + df$stroop2sat11 + df$ldstcorrect11 +
df$fluencyanimals11 + df$fluencyjobs11 + df$stroopinterference11 +	df$vsattotalsat11
df$psexf15 <- df$pp1sat15 + df$stroop1sat15 + df$stroop2sat15 + df$ldstcorrect15 +
df$fluencysupermarket15 + df$fluencyjobs15 + df$stroopinterference15 +	df$vsattotalsat15
df$ps06 <- df$pp1sat06 + df$stroop1sat06 + df$stroop2sat06 + df$ldstcorrect06
df$ps11 <- df$pp1sat11 + df$stroop1sat11 + df$stroop2sat11 + df$ldstcorrect11
df$ps15 <- df$pp1sat15 + df$stroop1sat15 + df$stroop2sat15 + df$ldstcorrect15
df$exf06 <- df$fluencyanimals06 + df$fluencyjobs06 + df$stroopinterference06 +	df$vsattotalsat06
df$exf11 <- df$fluencyanimals11 + df$fluencyjobs11 + df$stroopinterference11 +	df$vsattotalsat11
df$exf15 <- df$fluencysupermarket15 + df$fluencyjobs15 + df$stroopinterference15 +	df$vsattotalsat15
variables <- c("wmhratio06", "hvratio06", "mem06", "psexf06",
"wmhratio11", "hvratio11", "mem11", "psexf11",
"wmhratio15", "hvratio15", "mem15", "psexf15")
df.var <- df[variables]
df.var.incl <- df.var[complete.cases(df.var), ]
variables.mem15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "mem15")
df.var.mem15 <- df[variables.mem15]
df.var.mem15.incl <- df.var.mem15[complete.cases(df.var.mem15), ]
modelfile.mem15 <- paste("temp/long_wmh_hv_mem15.lav", sep="/")
model.mem15 <- readLines(modelfile.mem15)
fit.mem15 <- growth(model.mem15, data=df.var.mem15.incl)
fitMeasures(fit.mem15)
summary(fit.mem15)
semPaths(fit.mem15)
variables.ps15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "ps15")
df.var.ps15 <- df[variables.ps15]
df.var.ps15.incl <- df.var.ps15[complete.cases(df.var.ps15), ]
modelfile.ps15 <- paste("temp/long_wmh_hv_ps15.lav", sep="/")
model.ps15 <- readLines(modelfile.ps15)
fit.ps15 <- growth(model.ps15, data=df.var.ps15.incl)
fitMeasures(fit.ps15)
summary(fit.ps15)
variables.exf15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "exf15")
df.var.exf15 <- df[variables.exf15]
df.var.exf15.incl <- df.var.exf15[complete.cases(df.var.exf15), ]
modelfile.exf15 <- paste("temp/long_wmh_hv_exf15.lav", sep="/")
model.exf15 <- readLines(modelfile.exf15)
fit.exf15 <- growth(model.exf15, data=df.var.exf15.incl)
fitMeasures(fit.exf15)
summary(fit.exf15)
variables.dem15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "dementiai15", "dementiacat")
df.var.dem15 <- df[variables.dem15]
df.var.dem15.incl <- df.var.dem15[complete.cases(df.var.dem15), ]
modelfile.dem15 <- paste("temp/long_wmh_hv_dem15.lav", sep="/")
model.dem15 <- readLines(modelfile.dem15)
fit.dem15 <- growth(model.dem15, data=df.var.dem15.incl)
datafile <- "data/RUNDMC_datasheet_long.csv"
df <- read.csv(datafile, header=T)
df$hvratio06 <- (df$hv06 / df$tbv06)*1000
df$hvratio11 <- (df$hv11 / df$tbv11)*1000
df$hvratio15 <- (df$hv15 / df$tbv15)*1000
df$wmhratio06 <- log((df$wmh06 / df$tbv06)*100000)
df$wmhratio11 <- log((df$wmh11 / df$tbv11)*100000)
df$wmhratio15 <- log((df$wmh15 / df$tbv15)*100000)
variables.dem15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "dementiai15", "dementiacat")
df.var.dem15 <- df[variables.dem15]
df.var.dem15.incl <- df.var.dem15[complete.cases(df.var.dem15), ]
modelfile.dem15 <- paste("temp/long_wmh_hv_dem15.lav", sep="/")
model.dem15 <- readLines(modelfile.dem15)
fit.dem15 <- growth(model.dem15, data=df.var.dem15.incl)
variables.dem15 <- c("wmhratio06", "hvratio06",
"wmhratio11", "hvratio11",
"wmhratio15", "hvratio15", "dementiai15")
df.var.dem15 <- df[variables.dem15]
df.var.dem15.incl <- df.var.dem15[complete.cases(df.var.dem15), ]
modelfile.dem15 <- paste("temp/long_wmh_hv_dem15.lav", sep="/")
model.dem15 <- readLines(modelfile.dem15)
fit.dem15 <- growth(model.dem15, data=df.var.dem15.incl)
fitMeasures(fit.dem15)
summary(fit.dem15)
MakeLatentFormulas <- function(latVar, latVarNames) {
latSlope <- paste(latVar, "slope", sep="_")
latInt <- paste(latVar, "int", sep="_")
timeVec <- character()
for (times in 1:length(latVarNames)-1) {
timeStar <- paste(times, "*", sep="")
timeVec <- c(timeVec, timeStar)
}
latSlopeTerms <- paste(timeVec, latVarNames, sep="")
latSlopeForm <- paste(latSlope, "=~",
paste(latSlopeTerms, collapse=" + "))
latIntForm <- paste(latInt, "=~",
paste("1*", latVarNames, sep="", collapse=" + "))
#latCovar <- paste(latSlope, latInt, sep=" ~~ ")
return(c(latSlopeForm, latIntForm))#, latCovar))
}
TwoFactorLGM <- function(var1, var1names, var2, var2names) {
lat1form <- MakeLatentFormulas(var1, var1names)
lat2form <- MakeLatentFormulas(var2, var2names)
slopeCovar <- paste(c(var1, var2), "_slope", sep="", collapse=" ~~ ")
intCovar <- paste(c(var1, var2), "_int", sep="", collapse=" ~~ ")
return(c(lat1form, lat2form,
slopeCovar, intCovar))
}
volVars <- c("wmhratio")
hpcVars <- c("hvratio")
timepoints <- c("06", "11", "15")
datafile <- "../data/RUNDMC_datasheet_long.csv"
df <- read.csv(datafile, header=T)
df$hvratio06 <- (df$hv06 / df$tbv06)*1000
df$hvratio11 <- (df$hv11 / df$tbv11)*1000
timepoints <- c("06", "11", "15")
datafile <- "data/RUNDMC_datasheet_long.csv"
df <- read.csv(datafile, header=T)
df$hvratio06 <- (df$hv06 / df$tbv06)*1000
df$hvratio11 <- (df$hv11 / df$tbv11)*1000
df$hvratio15 <- (df$hv15 / df$tbv15)*1000
df$wmhratio06 <- log((df$wmh06 / df$tbv06)*100000)
df$wmhratio11 <- log((df$wmh11 / df$tbv11)*100000)
df$wmhratio15 <- log((df$wmh15 / df$tbv15)*100000)
for (i in hpcVars) {
for (j in volVars) {
variables <- c(i, j)
varNames <- c(as.vector(outer(variables, timepoints, paste, sep="")))
vecLen <- length(varNames)
hpcNames <- varNames[seq(1, vecLen, 2)]
volNames <- varNames[seq(2, vecLen, 2)]
df.subset <- df[varNames]
df.subset <- df.subset[complete.cases(df.subset), ]
modelSyntax <- TwoFactorLGM(i, hpcNames, j, volNames)
modelFileName <- paste("temp/", i, "_", j, "_growth.lav", sep="")
modelFile <- file(modelFileName)
writeLines(modelSyntax, modelFile)
close(modelFile)
fit <- growth(readLines(modelFileName),
data=df.subset)
summary(fit, standardized=T)
print(fitMeasures(fit, c("chisq", "df", "pvalue", "cfi", "rmsea")))
}
}
summary(fit, standardized=T)
datafile <- "data/ggplot_dem_wmh_hv.csv"
dem <- read.csv(datafile, sep=";", dec=",")
dem.incl <- dem[dem$inclusion==1,]
MakeLatentStrings <- function(latVar, latVarNames) {
latSlope <- paste(latVar, "slope", sep="_")
latInt <- paste(latVar, "int", sep="_")
timeVec <- character()
for (times in range(0, length(latVarNames)-1)) {
timeVec <- c(timeVec, times)
}
latSlopeForm <- paste(latSlope, "=~",
paste("1*", latVarNames, sep="", collapse=" + "))
latIntForm <- paste(latInt, "=~",
paste("1*", latVarNames, sep="", collapse=" + "))
}
ThreeFactorSEM <- function(var1, var1names, var2, var2names, var3, var3names) {
sem1form <- paste(var3names, "~", paste(var1names, var2names, sep=" + "))
sem2form <- paste(var1names, var2names, sep=" ~~ ")
test <- file("temp/cross_prop_wmh_hv_psexf.lav")
writeLines(c("# regressions",
sem1form,
"
",
"# covariances",
sem2form),
test)
close(test)
}
volVars <- c("wmhratio")
hpcVars <- c("hvratio")
cognVars <- c("psexf")
intVars <- c("int")
timepoints <- c("15")
datafile <- "data/RUNDMC_datasheet_long.csv"
df <- read.csv(datafile, header=T)
df$wmhratio15 <- log((df$wmh15 / df$tbv15)*100000)
df$hvratio15 <- (df$hv15 / df$tbv15)*1000
df$mem15 <- df$wvlt123correctmean15 + df$wvltdelayrecall15 +
df$reyimmrecalltotalscore15 +	df$reydelayrecalltotalscore15 +
df$pp2sat15 + df$pp3sat15
df$psexf15 <- df$pp1sat15 + df$stroop1sat15 + df$stroop2sat15 + df$ldstcorrect15 +
df$fluencysupermarket15 + df$fluencyjobs15 + df$stroopinterference15 +	df$vsattotalsat15
for (i in hpcVars) {
for (j in volVars) {
for (k in cognVars) {
for (l in intVars) {
variables <- c(i, j, k, l)
varNames <- c(as.vector(outer(variables, timepoints, paste, sep="")))
vecLen <- length(varNames)
hpcNames <- varNames[seq(1, vecLen, 4)]
volNames <- varNames[seq(2, vecLen, 4)]
cognNames <- varNames[seq(3, vecLen, 4)]
intNames <- varNames[seq(4, vecLen, 4)]
df.subset <- df[varNames]
df.subset <- df.subset[complete.cases(df.subset), ]
ThreeFactorSEM(i, hpcNames, j, volNames, k, cognNames)
}
}
}
}
df$int15 <- df$wmhratio15*df$hvratio15
MakeLatentStrings <- function(latVar, latVarNames) {
latSlope <- paste(latVar, "slope", sep="_")
latInt <- paste(latVar, "int", sep="_")
timeVec <- character()
for (times in range(0, length(latVarNames)-1)) {
timeVec <- c(timeVec, times)
}
latSlopeForm <- paste(latSlope, "=~",
paste("1*", latVarNames, sep="", collapse=" + "))
latIntForm <- paste(latInt, "=~",
paste("1*", latVarNames, sep="", collapse=" + "))
}
ThreeFactorSEM <- function(var1, var1names, var2, var2names, var3, var3names) {
sem1form <- paste(var3names, "~", paste(var1names, var2names, sep=" + "))
sem2form <- paste(var1names, var2names, sep=" ~~ ")
test <- file("temp/cross_prop_wmh_hv_psexf.lav")
writeLines(c("# regressions",
sem1form,
"
",
"# covariances",
sem2form),
test)
close(test)
}
volVars <- c("wmhratio")
hpcVars <- c("hvratio")
cognVars <- c("psexf")
intVars <- c("int")
timepoints <- c("15")
datafile <- "data/RUNDMC_datasheet_long.csv"
df <- read.csv(datafile, header=T)
df$wmhratio15 <- log((df$wmh15 / df$tbv15)*100000)
df$hvratio15 <- (df$hv15 / df$tbv15)*1000
df$mem15 <- df$wvlt123correctmean15 + df$wvltdelayrecall15 +
df$reyimmrecalltotalscore15 +	df$reydelayrecalltotalscore15 +
df$pp2sat15 + df$pp3sat15
df$psexf15 <- df$pp1sat15 + df$stroop1sat15 + df$stroop2sat15 + df$ldstcorrect15 +
df$fluencysupermarket15 + df$fluencyjobs15 + df$stroopinterference15 +	df$vsattotalsat15
df$int15 <- df$wmhratio15*df$hvratio15
for (i in hpcVars) {
for (j in volVars) {
for (k in cognVars) {
for (l in intVars) {
variables <- c(i, j, k, l)
varNames <- c(as.vector(outer(variables, timepoints, paste, sep="")))
vecLen <- length(varNames)
hpcNames <- varNames[seq(1, vecLen, 4)]
volNames <- varNames[seq(2, vecLen, 4)]
cognNames <- varNames[seq(3, vecLen, 4)]
intNames <- varNames[seq(4, vecLen, 4)]
df.subset <- df[varNames]
df.subset <- df.subset[complete.cases(df.subset), ]
ThreeFactorSEM(i, hpcNames, j, volNames, k, cognNames)
}
}
}
}
model <- readLines("temp/cross_prop_wmh_hv_psexf.lav")
fit <- sem(model,
data=df.subset)
summary(fit, standardized=T, rsquare=T)
MakeLatentStrings <- function(latVar, latVarNames) {
latSlope <- paste(latVar, "slope", sep="_")
latInt <- paste(latVar, "int", sep="_")
timeVec <- character()
for (times in range(0, length(latVarNames)-1)) {
timeVec <- c(timeVec, times)
}
latSlopeForm <- paste(latSlope, "=~",
paste("1*", latVarNames, sep="", collapse=" + "))
latIntForm <- paste(latInt, "=~",
paste("1*", latVarNames, sep="", collapse=" + "))
}
ThreeFactorSEM <- function(var1, var1names, var2, var2names, var3, var3names) {
sem1form <- paste(var3names, "~", paste(var1names, var2names, sep=" + "))
sem2form <- paste(var1names, var2names, sep=" ~~ ")
test <- file("temp/cross_prop_wmh_hv_mem.lav")
writeLines(c("# regressions",
sem1form,
"
",
"# covariances",
sem2form),
test)
close(test)
}
volVars <- c("wmhratio")
hpcVars <- c("hvratio")
cognVars <- c("mem")
intVars <- c("int")
timepoints <- c("15")
datafile <- "data/RUNDMC_datasheet_long.csv"
df <- read.csv(datafile, header=T)
df$wmhratio15 <- log((df$wmh15 / df$tbv15)*100000)
df$hvratio15 <- (df$hv15 / df$tbv15)*1000
df$mem15 <- df$wvlt123correctmean15 + df$wvltdelayrecall15 +
df$reyimmrecalltotalscore15 +	df$reydelayrecalltotalscore15 +
df$pp2sat15 + df$pp3sat15
df$psexf15 <- df$pp1sat15 + df$stroop1sat15 + df$stroop2sat15 + df$ldstcorrect15 +
df$fluencysupermarket15 + df$fluencyjobs15 + df$stroopinterference15 +	df$vsattotalsat15
df$int15 <- df$wmhratio15*df$hvratio15
for (i in hpcVars) {
for (j in volVars) {
for (k in cognVars) {
for (l in intVars) {
variables <- c(i, j, k, l)
varNames <- c(as.vector(outer(variables, timepoints, paste, sep="")))
vecLen <- length(varNames)
hpcNames <- varNames[seq(1, vecLen, 4)]
volNames <- varNames[seq(2, vecLen, 4)]
cognNames <- varNames[seq(3, vecLen, 4)]
intNames <- varNames[seq(4, vecLen, 4)]
df.subset <- df[varNames]
df.subset <- df.subset[complete.cases(df.subset), ]
ThreeFactorSEM(i, hpcNames, j, volNames, k, cognNames)
}
}
}
}
model <- readLines("temp/cross_prop_wmh_hv_mem.lav")
fit <- sem(model,
data=df.subset)
summary(fit, standardized=T, rsquare=T)
